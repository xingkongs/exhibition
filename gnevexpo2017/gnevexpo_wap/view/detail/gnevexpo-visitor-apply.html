<!DOCTYPE html>
<html lang="zh-cmn-Hans" style="opacity: 0;">
	<head>
		<meta charset="utf-8">
        <title>2017全球新能源汽车大会未来汽车展（GNEV EXPO）-观众报名-第一电动网</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
        <meta name="format-detection" content="email=no" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="renderer" content="webkit">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="wap-font-scale" content="no" />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <script type="text/javascript">
            //window.location.href = "https://jinshuju.net/f/J5Lxrf";
        </script>
        <script type="text/javascript" src="../../js/mobile-detect.min.js"></script>
        <script type="text/javascript" src="../../js/wlh.js"></script>
        <script src="../../js/change_view.js" type="text/javascript" charset="utf-8"></script>
        <meta name="apple-mobile-web-app-title" content="">
        <link rel="stylesheet" href="../../css/mui.min.css">
        <link href="../../css/mui.picker.css" rel="stylesheet" />
        <link href="../../css/mui.poppicker.css" rel="stylesheet" />
        <link rel="stylesheet" type="text/css" href="../../css/comm.css" />
        <link rel="stylesheet" type="text/css" href="../../css/detail/apply.css" />
        <script src="../../js/jquery.min.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="content" class="content exhibitionContent">
			<div class="errTip" style="display: none;">
				格式错误
			</div>
			<div class="navWrap">
				<div class="commonTitle">
					<a href="" class="isLink" id="isLink">
						<img src="../../img/navArrow2.png"/>
					</a>
					<span id="isTxt">观众报名</span>
				</div>
			</div>
			<div class="navPlace"></div>
			<div class="applyForm">
				<div class="listRow actRow" id="showActPicker">
					<span id="actResult"></span>
					<p id="actOld">请问您想参加以下哪项活动</p>
					<img src="../../img/arrow_down.png"/>
				</div>
				<div class="listRow aimRow" id="showAimPicker">
					<span id="aimResult"></span>
					<p id="aimOld">请问您为何想参加展会</p>
					<img src="../../img/arrow_down.png"/>
				</div>
				<input class="nameInput" type="text" name=""  value="" placeholder="联系人" maxlength='6' />
				<input class="phoneInput" id="phoneInput" placeholder="手机号" type="number" maxlength='11' pattern="[0-9]*" />
				<input type="submit" class="submitBtn" id="submitBtn" value="提交" />
			</div>
		</div>
	</body>
	<script src="../../js/common.js"></script>
	<script src="../../js/mui.min.js"></script>
	<script src="../../js/mui.picker.js"></script>
	<script src="../../js/mui.poppicker.js"></script>
	<script type="text/javascript">
		var actResult = document.getElementById('actResult');
		var aimResult = document.getElementById('aimResult');
		var actOld = document.getElementById('actOld');
		var aimOld = document.getElementById('aimOld');
		var reasons=aimResult.innerHTML;
		var meetingName=actResult.innerHTML;
		
		(function($, doc) {
			$.init();
			$.ready(function() {
				var actList=[{
						value: '',
						text: '未来汽车开发者大会'
					}, {
						value: '',
						text: '新能源汽车产业经济高峰论坛'
					}, {
						value: '',
						text: '企业推介会'
					}, {
						value: '',
						text: '电动物流车大会'
					}, {
						value: '', 
						text: '未来汽车嘉年华'
					}];
				var actPicker = new $.PopPicker();
				actPicker.setData(actList);
				var showActPickerButton = doc.getElementById('showActPicker');
				showActPickerButton.addEventListener('tap', function(event) {
					actPicker.show(function(items) {
						//userResult.innerText = JSON.stringify(items[0]);
						actResult.innerText = items[0].text;
						meetingName=items[0].text;
						actOld.style.display='none';
						//data_json.brandId=items[0].value;
						//data_json.brandName=items[0].text;
						//返回 false 可以阻止选择框的关闭
						//return false;
					});
				}, false);
				
				var aimList=[{
						value: '',
						text: '我要申请成为演讲嘉宾'
					}, {
						value: '',
						text: '我要投资创业项目'
					}, {
						value: '',
						text: '我要展示我的创业项目'
					}, {
						value: '',
						text: '我想买新能源汽车'
					}, {
						value: '', 
						text: '我有整车采购需求'
					}, {
						value: '', 
						text: '我有零部件采购需求'
					}, {
						value: '', 
						text: '我想成为整车供应商'
					}, {
						value: '', 
						text: '我想成为零部件供应商'
					}, {
						value: '', 
						text: '其他'
					}];
				var aimPicker = new $.PopPicker();
				aimPicker.setData(aimList);
				var showAimPickerButton = doc.getElementById('showAimPicker');
				showAimPickerButton.addEventListener('tap', function(event) {
					aimPicker.show(function(items) {
						aimResult.innerText = items[0].text;
						reasons= items[0].text;
						aimOld.style.display='none';
					});
				}, false);
			});
		})(mui, document);
		$(function () {
        	document.getElementById("isLink").addEventListener('click',function(ev){
				ev.preventDefault();
				document.referrer == '' ?window.location.href = 'exhibition.html' :window.history.go(-1);
			},false)
        	var nameVal=$('.nameInput').val();
        	var telVal=$('.phoneInput').val();
        	var testphone=/^1[1-9]{1}\d{9}$/;
        	$(".nameInput").on("input",function(){
				nameVal=this.value;
			});
			$(".phoneInput").on("input",function(){
				telVal=this.value;
				var maxChars1 =11;
			    if (telVal.length > maxChars1){
			       this.value = this.value.substring(0,maxChars1);
			       telVal=this.value;
			    }
			});
			$(".emailInput").on("input",function(){
				emailVal=this.value;
			});
        	function checkValue(){
        		if(meetingName==''){
					$('.errTip').html('请选择要参加的活动')
					$('.errTip').slideDown();
        			setTimeout(function(){
						$('.errTip').slideUp();
					},2000)
					return false;
				}
        		if(reasons==''){
					$('.errTip').html('请选择为何参加展会')
					$('.errTip').slideDown();
        			setTimeout(function(){
						$('.errTip').slideUp();
					},2000)
					return false;
				}
				if(nameVal==''){
					$('.errTip').html('请输入联系人')
					$('.errTip').slideDown();
        			setTimeout(function(){
						$('.errTip').slideUp();
					},2000)
					return false;
				}
				if(nameVal.length>=7||nameVal.length<2){
					$('.errTip').html(' 请控制在2-6个字以内的联系人姓名')
					$('.errTip').slideDown();
        			setTimeout(function(){
						$('.errTip').slideUp();
					},2000)
					return false;
				}
				if(telVal==''){
					$('.errTip').html('请输入手机号')
					$('.errTip').slideDown();
        			setTimeout(function(){
						$('.errTip').slideUp();
					},2000)
					return false;
				}
				if(!testphone.test(telVal)){
					$('.errTip').html('请输入11位手机号，只能是数字')
					$('.errTip').slideDown();
        			setTimeout(function(){
						$('.errTip').slideUp();
					},2000)
					return false;
				}
				$.ajax({
					url: 'http://www.d1ev.com/index.php?g=contents&m=jiaoyihui&a=canhui',
					type: 'post',
					data: {
						'istel':1,
						'realname':nameVal,
						'tel':telVal,
						'reason':reasons,
						'meeting-name':meetingName
					},
					async:false,
					dataType: 'text',
					success: function(data) {
						console.log(data);
						//document.write(data);
						if(data.indexOf("成功") > 0){
							setTimeout(function(){
								$('body').css('overflow','hidden');
					   			confirm("报名提交成功！",["知道了"],function(){
									$('body').css('overflow','auto');
									window.location.href='exhibition.html';
								},function(){
									$('body').css('overflowY','auto');
								})
							},500);
						}
					}
				});
			}
        	$(".content").on('click',"#submitBtn",function(){
				checkValue();
			});
		});
	</script>
	<div id="footer-analysis-3rd" style="display: none;">
        <script type="text/javascript" src="../../js/analysis.3rd.js"></script>
    </div>
</html>